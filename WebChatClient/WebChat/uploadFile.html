<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
    <script type="text/javascript" src="scripts/jquery-2.0.2.min.js"></script>
    <script type="text/javascript" src="scripts/bootstrap.min.js"></script>
    <script type="text/javascript" src="scripts/tab.js"></script>
    <script type="text/javascript" src="scripts/http-requester.js"></script>
    <script type="text/javascript" src="scripts/class.js"></script>
    <script type="text/javascript" src="scripts/persister.js"></script>
    <script type="text/javascript" src="scripts/controller.js"></script>
    <script type="text/javascript" src="scripts/ui.js"></script>
    <script type="text/javascript" src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/sha1.js"></script>

    <script src="https://d10ajoocuyu32n.cloudfront.net/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
</head>
<body>
<!--     <form enctype="multipart/form-data">
        <label>
            Using JQuery</label>
        <input name="file" type="file" />
        <input type="button" id="Upload" value="Upload" />
    </form> -->
    <!--    <form enctype="multipart/form-data">
        <div>
            <label>
                Using submit</label>
            <input name="myFile" type="file" />
        </div>
        <div>
            <input type="submit" value="Submit" id="submit" />
        </div>
    </form>-->
<form enctype="multipart/form-data" method="POST">
<input name="data" size="40" type="file" />
<br>
<input type="submit" id="Upload" />
</form>
    <script type="text/javascript">
        $(function () {
		    $('#Upload').click(function () {
                var formData = new FormData($('form')[0]);
                var request = $.ajax({
                    url: 'http://teammilhouse-2.apphb.com/api/user/changeavatar/' + localStorage.getItem("sessionKey"),
					//url: 'http://localhost:26368/api/user/changeavatar/' + localStorage.getItem("sessionKey"),
                    type: 'POST',
                    // Form data
                    data: formData,
                    //Options to tell JQuery not to process data or worry about content-type
                    cache: false,
                    contentType: false,
                    processData: false,
					success: function(avatar) {
						localStorage.setItem("avatar", avatar);
						function MyComplexType()
						{       
							var self = this;
							self.Avatar = localStorage.getItem("avatar");
						}
						$.ajax({
							url: 'http://teammilhouse-2.apphb.com/api/user/updateavatar/' + localStorage.getItem("sessionKey"),
							//url: 'http://localhost:26368/api/user/updateavatar/' + localStorage.getItem("sessionKey"),
							type: 'PUT',
							// Form data
							data: JSON.stringify(new MyComplexType()),
							//Options to tell JQuery not to process data or worry about content-type
							contentType: 'application/json'
						});
					}
                });
            });
		
            

        });
    </script>
<!-- 	$('#Upload').click(function () {
                var formData = new FormData($('form')[0]);
                var request = $.ajax({
                    url: 'http://teammilhouse-2.apphb.com/api/user/changeavatar',
                    type: 'POST',
                    // Form data
                    data: formData,
                    //Options to tell JQuery not to process data or worry about content-type
                    cache: false,
                    contentType: false,
                    processData: false
                });
            });

            $('#submit').click(function () {
                var formData = new FormData($('form')[0]);
                var request = $.ajax({
                    url: 'http://teammilhouse-2.apphb.com/api/user/changeavatar',
                    type: 'POST',
                    // Form data
                    data: formData,
                    //Options to tell JQuery not to process data or worry about content-type
                    cache: false,
                    contentType: false,
                    processData: false
                });
            });				-->
</body>
</html>
